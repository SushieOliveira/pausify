<!doctype html>
<html lang="pt">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Ferramentas</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background-color: #e9f7f5;
            font-family: system-ui, -apple-system, BlinkMacSystemFont;
        }

        main {
            max-width: 420px;
            margin: auto;
            padding: 20px;
            min-height: 100vh;
        }

        h4 {
            color: #0a5c60;
            font-weight: 800;
            text-align: center;
            margin-bottom: 25px;
        }

        .card {
            width: 100%;
            border-radius: 25px;
            border: 1px solid #0a5c60;
            padding: 15px;
        }

        .card-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: #0a5c60;
        }

        .card-text {
            margin-bottom: 10px;
        }

        .btn-principal {
            background-color: #0a5c60;
            color: white;
            border-radius: 30px;
            padding: 10px;
            font-weight: bold;
            border: 2px solid white;
            transition: background-color 0.2s, color 0.2s, border-color 0.2s;
            margin-top: 10px;
            text-align: center;
            display: block;
            width: 100%;
            text-decoration: none;
        }

        .btn-principal:hover {
            background-color: white;
            color: #0a5c60;
            border-color: #0a5c60;
            text-decoration: none;
        }

        .btn-voltar {
            width: 150px;
        }

        iframe {
            width: 100%;
            height: 200px;
            border-radius: 15px;
            border: none;
            margin-top: 10px;
        }

        .card + .card {
            margin-top: 15px;
        }
    </style>
</head>
<body>

<main>
    <h4>Sugestões para o teu estado de espírito</h4>
    <div id="cardContainer"></div>

    <div class="d-flex justify-content-center mt-4">
        <a href="pomodoro.html" class="btn-principal btn-voltar">Continuar</a>
    </div>
</main>


<script src="../js/estadoespirito.js"></script>


<script>
(function() {
    var dailyCheckin = JSON.parse(localStorage.getItem("dailyCheckin"));
    if (!dailyCheckin) {
        alert("Não foi feito check-in ainda!");
        window.location.href = "checkin.html";
        return;
    }


    var mood = dailyCheckin.mood;
    var moodSuggestions = moodsData[mood];
    var container = document.getElementById("cardContainer");

    


    function getRandomSuggestions(arr, count) {
        if (!count) count = 3;
        var cloned = [];
        for (var i = 0; i < arr.length; i++) {
            cloned.push(arr[i]);
        }

        var result = [];
        for (var i = 0; i < count; i++) {
            if (cloned.length === 0) break;
            var idx = Math.floor(Math.random() * cloned.length);
            result.push(cloned[idx]);
            cloned.splice(idx, 1);
        }
        return result;
    }


    var suggestions = getRandomSuggestions(moodSuggestions, 3);

    for (var i = 0; i < suggestions.length; i++) {
        var s = suggestions[i];

        var card = document.createElement("div");
        card.className = "card shadow";

        var title = document.createElement("div");
        title.className = "card-title";
        title.textContent = s.emoji + " Sugestão";
        card.appendChild(title);

        var text = document.createElement("div");
        text.className = "card-text";
        text.textContent = s.text;
        card.appendChild(text);


        if (s.url) {
            var iframe = document.createElement("iframe");
            iframe.src = s.url.replace("watch?v=", "embed/");
            card.appendChild(iframe);
        }


        if (s.gif) {
            var img = document.createElement("img");
            img.src = s.gif;
            img.style.width = "100%";
            img.style.borderRadius = "15px";
            img.style.marginTop = "10px";
            card.appendChild(img);
        }

        container.appendChild(card);
    }
})();
</script>

</body>
</html>
